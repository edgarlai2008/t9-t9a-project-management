<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ°´å–‰ç™½åœˆæª¢æŸ¥è¡¨ - Water Pipe Inspection</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Arial, sans-serif; }
        body { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); min-height: 100vh; padding: 20px; color: #fff; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 20px; color: #00d4ff; font-size: 1.8em; }
        h2 { color: #ffa502; margin: 25px 0 15px 0; border-bottom: 2px solid #ffa502; padding-bottom: 10px; }
        .stats { background: rgba(255,165,2,0.2); padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center; }
        .stats span { font-size: 1.5em; font-weight: bold; color: #ffa502; }
        .checklist-table { width: 100%; border-collapse: collapse; background: rgba(255,255,255,0.05); border-radius: 10px; overflow: hidden; }
        .checklist-table th, .checklist-table td { padding: 12px 8px; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
        .checklist-table th { background: rgba(0,212,255,0.3); color: #fff; font-size: 0.9em; }
        .checklist-table td { font-size: 0.85em; }
        .checklist-table td:first-child { background: rgba(255,255,255,0.1); font-weight: bold; }
        .floor-row { cursor: pointer; transition: background 0.3s; }
        .floor-row:hover { background: rgba(255,255,255,0.1); }
        .floor-row.completed { background: rgba(46,213,115,0.2); }
        .floor-row.partial { background: rgba(255,165,2,0.2); }
        .checkbox-wrapper { display: flex; justify-content: center; align-items: center; }
        .custom-checkbox {
            width: 28px; height: 28px;
            appearance: none;
            border: 2px solid #00d4ff;
            border-radius: 6px;
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
        }
        .custom-checkbox:checked {
            background: #2ed573;
            border-color: #2ed573;
        }
        .custom-checkbox:checked::after {
            content: 'âœ“';
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            font-size: 18px;
            font-weight: bold;
        }
        .btn { padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; font-size: 1em; margin: 5px; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(135deg, #00d4ff, #0099cc); color: #fff; }
        .btn-danger { background: linear-gradient(135deg, #ff4757, #cc0022); color: #fff; }
        .btn-secondary { background: rgba(255,255,255,0.2); color: #fff; }
        .action-bar { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; justify-content: center; }
        .section-complete { background: rgba(46,213,115,0.3); padding: 15px; border-radius: 10px; margin-top: 20px; text-align: center; }
        .section-complete h3 { color: #2ed573; }
        @media (max-width: 768px) {
            .checklist-table th, .checklist-table td { padding: 8px 4px; font-size: 0.75em; }
            .custom-checkbox { width: 24px; height: 24px; }
            h1 { font-size: 1.4em; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš¿ æ°´å–‰ç™½åœˆæª¢æŸ¥è¡¨</h1>
        
        <div class="stats">
            ç¸½é€²åº¦: <span id="totalProgress">0%</span> | 
            å·²å®Œæˆ: <span id="completedCount">0</span> / <span id="totalCount">0</span>
        </div>
        
        <div class="action-bar">
            <button class="btn btn-primary" onclick="checkAllInSection('HZ')">HZ å…¨é¸</button>
            <button class="btn btn-primary" onclick="checkAllInSection('LZ')">LZ å…¨é¸</button>
            <button class="btn btn-secondary" onclick="uncheckAll('HZ')">HZ æ¸…ç©º</button>
            <button class="btn btn-secondary" onclick="uncheckAll('LZ')">LZ æ¸…ç©º</button>
            <button class="btn btn-danger" onclick="resetAll()">å…¨éƒ¨é‡è¨­</button>
        </div>
        
        <h2>HZ - æ°´å–‰ç™½åœˆ</h2>
        <table class="checklist-table" id="HZ-table">
            <thead>
                <tr>
                    <th>æ¨“å±¤</th>
                    <th>Aå®¢å»</th>
                    <th>Aå»šæˆ¿</th>
                    <th>Bä¸»å»</th>
                    <th>Bå®¢å»</th>
                    <th>Bå»šæˆ¿</th>
                </tr>
            </thead>
            <tbody id="HZ-body"></tbody>
        </table>
        
        <h2>LZ - æ°´å–‰ç™½åœˆ</h2>
        <table class="checklist-table" id="LZ-table">
            <thead>
                <tr>
                    <th>æ¨“å±¤</th>
                    <th>Aä¸»å»</th>
                    <th>Aå®¢å»</th>
                    <th>Aå»šæˆ¿</th>
                    <th>Bä¸»å»</th>
                    <th>Bå®¢å»</th>
                    <th>Bå»šæˆ¿</th>
                    <th>Cä¸»å»</th>
                    <th>Cå®¢å»</th>
                    <th>Cå»šæˆ¿</th>
                </tr>
            </thead>
            <tbody id="LZ-body"></tbody>
        </table>
        
        <div class="section-complete" id="all-done" style="display:none;">
            <h3>ğŸ‰ æ‰€æœ‰æª¢æŸ¥å·²å®Œæˆï¼</h3>
        </div>
    </div>

    <script>
        const HZ_FLOORS = ['26', '25', '23', '22', '21', '20', '19', '18', '17', '16', '15', '12', '11', '10', '9'];
        const HZ_ROOMS = ['Aå®¢å»', 'Aå»šæˆ¿', 'Bä¸»å»', 'Bå®¢å»', 'Bå»šæˆ¿'];
        
        const LZ_FLOORS = ['8', '7', '6', '5', '3', '2'];
        const LZ_ROOMS = ['Aä¸»å»', 'Aå®¢å»', 'Aå»šæˆ¿', 'Bä¸»å»', 'Bå®¢å»', 'Bå»šæˆ¿', 'Cä¸»å»', 'Cå®¢å»', 'Cå»šæˆ¿'];
        
        // Load saved data or create empty
        let savedData = JSON.parse(localStorage.getItem('waterPipeChecklist') || '{}');
        
        function saveData() {
            localStorage.setItem('waterPipeChecklist', JSON.stringify(savedData));
            updateStats();
        }
        
        function toggleCheck(section, floor, room) {
            const key = `${section}-${floor}-${room}`;
            if (savedData[key]) {
                delete savedData[key];
            } else {
                savedData[key] = true;
            }
            saveData();
            renderTables();
        }
        
        function isChecked(section, floor, room) {
            return savedData[`${section}-${floor}-${room}`];
        }
        
        function countSection(section, floors, rooms) {
            let total = 0;
            let completed = 0;
            floors.forEach(floor => {
                rooms.forEach(room => {
                    total++;
                    if (isChecked(section, floor, room)) completed++;
                });
            });
            return { total, completed };
        }
        
        function checkAllInSection(section) {
            const floors = section === 'HZ' ? HZ_FLOORS : LZ_FLOORS;
            const rooms = section === 'HZ' ? HZ_ROOMS : LZ_ROOMS;
            floors.forEach(floor => {
                rooms.forEach(room => {
                    savedData[`${section}-${floor}-${room}`] = true;
                });
            });
            saveData();
            renderTables();
        }
        
        function uncheckAll(section) {
            const floors = section === 'HZ' ? HZ_FLOORS : LZ_FLOORS;
            const rooms = section === 'HZ' ? HZ_ROOMS : LZ_ROOMS;
            floors.forEach(floor => {
                rooms.forEach(room => {
                    delete savedData[`${section}-${floor}-${room}`];
                });
            });
            saveData();
            renderTables();
        }
        
        function resetAll() {
            if (confirm('ç¢ºå®šè¦æ¸…ç©ºæ‰€æœ‰é¸é …ï¼Ÿ')) {
                savedData = {};
                saveData();
                renderTables();
            }
        }
        
        function renderTables() {
            renderHZ();
            renderLZ();
            updateStats();
        }
        
        function renderHZ() {
            const tbody = document.getElementById('HZ-body');
            tbody.innerHTML = HZ_FLOORS.map(floor => {
                const rooms = HZ_ROOMS.map(room => `
                    <td class="checkbox-wrapper">
                        <input type="checkbox" class="custom-checkbox" 
                            ${isChecked('HZ', floor, room) ? 'checked' : ''}
                            onchange="toggleCheck('HZ', '${floor}', '${room}')">
                    </td>
                `).join('');
                return `<tr class="floor-row">${rooms}</tr>`;
            }).join('');
        }
        
        function renderLZ() {
            const tbody = document.getElementById('LZ-body');
            tbody.innerHTML = LZ_FLOORS.map(floor => {
                const rooms = LZ_ROOMS.map(room => `
                    <td class="checkbox-wrapper">
                        <input type="checkbox" class="custom-checkbox"
                            ${isChecked('LZ', floor, room) ? 'checked' : ''}
                            onchange="toggleCheck('LZ', '${floor}', '${room}')">
                    </td>
                `).join('');
                return `<tr class="floor-row">${rooms}</tr>`;
            }).join('');
        }
        
        function updateStats() {
            const hz = countSection('HZ', HZ_FLOORS, HZ_ROOMS);
            const lz = countSection('LZ', LZ_FLOORS, LZ_ROOMS);
            const total = hz.total + lz.total;
            const completed = hz.completed + lz.completed;
            const percent = total > 0 ? Math.round(completed / total * 100) : 0;
            
            document.getElementById('totalProgress').textContent = percent + '%';
            document.getElementById('completedCount').textContent = completed;
            document.getElementById('totalCount').textContent = total;
            
            document.getElementById('all-done').style.display = percent === 100 ? 'block' : 'none';
        }
        
        // Initialize
        renderTables();
    </script>
</body>
</html>
