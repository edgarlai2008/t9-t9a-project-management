<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥äººå‡ºå‹¤è¨˜éŒ„ - Smart Worker Attendance</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', Arial, sans-serif; }
        body { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); min-height: 100vh; padding: 15px; color: #fff; }
        .container { max-width: 600px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 15px; color: #00d4ff; font-size: 1.5em; }
        h2 { color: #ffa502; margin: 20px 0 10px 0; font-size: 1.2em; border-bottom: 2px solid #ffa502; padding-bottom: 5px; }
        .card { background: rgba(255,255,255,0.1); padding: 15px; border-radius: 12px; margin-bottom: 15px; backdrop-filter: blur(10px); }
        .btn { padding: 10px 15px; border: none; border-radius: 8px; cursor: pointer; font-size: 0.9em; transition: all 0.3s; margin: 3px; }
        .btn-primary { background: linear-gradient(135deg, #00d4ff, #0099cc); color: #fff; }
        .btn-secondary { background: rgba(255,255,255,0.2); color: #fff; }
        .btn-danger { background: linear-gradient(135deg, #ff4757, #cc0022); color: #fff; }
        .btn-large { padding: 15px 25px; font-size: 1.1em; width: 100%; margin: 5px 0; }
        .selection-area { margin-top: 15px; }
        .selection-area label { display: block; margin-bottom: 5px; color: #aaa; font-size: 0.9em; }
        select, input { width: 100%; padding: 12px; border: none; border-radius: 8px; background: rgba(255,255,255,0.15); color: #fff; font-size: 1em; margin-bottom: 10px; }
        select:focus, input:focus { outline: none; background: rgba(255,255,255,0.25); }
        .work-item { background: rgba(255,165,2,0.2); padding: 12px; border-radius: 8px; margin-bottom: 10px; border-left: 4px solid #ffa502; }
        .work-item .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
        .work-item .åˆ¤é ­ { color: #00d4ff; font-weight: bold; }
        .work-item .ä½ç½® { color: #ffa502; font-size: 0.9em; }
        .work-item .å…§å®¹ { margin: 5px 0; }
        .work-item .äººæ•¸ { font-size: 0.9em; color: #aaa; }
        .stats { background: rgba(0,212,255,0.2); padding: 15px; border-radius: 10px; margin-bottom: 20px; text-align: center; }
        .stats span { font-size: 1.5em; font-weight: bold; color: #00d4ff; }
        .action-bar { display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap; }
        .action-bar .btn { flex: 1; }
        .hidden { display: none !important; }
        .back-btn { background: rgba(255,255,255,0.1); color: #fff; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; margin-bottom: 15px; }
        .form-group { margin-bottom: 12px; }
        .form-group label { display: block; margin-bottom: 5px; color: #aaa; font-size: 0.9em; }
        .pill-btn { display: inline-block; padding: 8px 15px; border-radius: 20px; background: rgba(255,255,255,0.1); color: #fff; cursor: pointer; margin: 3px; transition: all 0.3s; }
        .pill-btn:hover { background: rgba(255,255,255,0.2); }
        .pill-btn.selected { background: #00d4ff; color: #000; }
        .section-title { color: #ffa502; font-weight: bold; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; cursor: pointer; }
        .section-title span { font-size: 1.2em; }
        .section-title .location-display { color: #00d4ff; font-weight: normal; margin-left: auto; }
        .modal { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 1000; }
        .modal-content { background: #1a1a2e; padding: 20px; border-radius: 15px; max-width: 300px; width: 90%; }
        .modal h3 { margin-bottom: 15px; color: #00d4ff; }
        .modal .btn { width: 100%; margin-bottom: 10px; }
        .work-item-actions { margin-top: 10px; display: flex; gap: 5px; }
        .work-item-actions .btn { padding: 5px 10px; font-size: 0.8em; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ‘· å·¥äººå‡ºå‹¤è¨˜éŒ„</h1>
        
        <div class="stats">
            ä»Šæ—¥ç¸½äººæ•¸: <span id="totalWorkers">0</span> äºº | 
            é …ç›®æ•¸: <span id="totalItems">0</span>
        </div>
        
        <div class="action-bar">
            <button class="btn btn-primary" onclick="showAddForm()">â• æ–°å¢ç´€éŒ„</button>
            <button class="btn btn-secondary" onclick="generateReport()">ğŸ“‹ ç”Ÿæˆå ±å‘Š</button>
            <button class="btn btn-danger" onclick="clearAll()">ğŸ—‘ï¸ æ¸…ç©ºå…¨éƒ¨</button>
        </div>
        
        <!-- æ–°å¢è¡¨å–® -->
        <div id="addForm" class="card hidden">
            <button class="back-btn" onclick="hideAddForm()">â† è¿”å›</button>
            
            <!-- Béƒ¨åˆ†: å·¥ä½œå…§å®¹ (ç§»åˆ°æœ€å‰) -->
            <div id="workSection">
                <div class="section-title"><span>ğŸ“</span> å·¥ä½œå…§å®¹</div>
                <div class="form-group">
                    <input type="text" id="workContent" placeholder="ä¾‹å¦‚ï¼šéœ²å°åœ°å°ç“¦æƒå£">
                </div>
                <div class="form-group">
                    <label>åˆ¤é ­</label>
                    <select id="foreman">
                        <option value="">é¸æ“‡åˆ¤é ­...</option>
                        <option value="æŒ¯æº">æŒ¯æº</option>
                        <option value="ç›ˆåº·">ç›ˆåº·</option>
                        <option value="èšé¾">èšé¾</option>
                        <option value="å‰µåŸº">å‰µåŸº</option>
                        <option value="å‹è‰¯è¨˜">å‹è‰¯è¨˜</option>
                        <option value="æ—­æš‰">æ—­æš‰</option>
                        <option value="PHM">PHM</option>
                        <option value="ç”Ÿæ´»è‰²å½©">ç”Ÿæ´»è‰²å½©</option>
                        <option value="é æ±">é æ±</option>
                        <option value="æ’å®‰">æ’å®‰</option>
                        <option value="ç¾ç‰¹">ç¾ç‰¹</option>
                        <option value="æ–°é«˜">æ–°é«˜</option>
                        <option value="å˜‰è‡¨">å˜‰è‡¨</option>
                        <option value="æ·é”">æ·é”</option>
                        <option value="ä¿¡ç›Š">ä¿¡ç›Š</option>
                        <option value="è¯æ˜‡">è¯æ˜‡</option>
                        <option value="æ£®è¯">æ£®è¯</option>
                        <option value="è¥¿é–€å­">è¥¿é–€å­</option>
                        <option value="é‡‘ç£Š">é‡‘ç£Š</option>
                        <option value="æ•¸ç¢¼é€š">æ•¸ç¢¼é€š</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>äººæ•¸</label>
                    <select id="workerCount">
                        <option value="1">1 äºº</option>
                        <option value="2">2 äºº</option>
                        <option value="3">3 äºº</option>
                        <option value="4">4 äºº</option>
                        <option value="5">5 äºº</option>
                        <option value="more">æ›´å¤š...</option>
                    </select>
                    <input type="number" id="moreWorkers" class="hidden" placeholder="è¼¸å…¥äººæ•¸" min="1">
                </div>
                <button class="btn btn-primary btn-large" onclick="addWork()">âœ… ç¢ºèªæ–°å¢</button>
            </div>
            
            <!-- Aéƒ¨åˆ†: ä½ç½®é¸æ“‡ (å¯å±•é–‹æ”¶åˆ) -->
            <div style="margin-top: 15px;">
                <div class="section-title" onclick="toggleLocationSection()">
                    <span></span> é¸æ“‡ä½ç½® (é»æ“Šå±•é–‹)
                    <span id="currentLocation" class="location-display"></span>
                    <span id="locationToggleIcon">â–¼</span>
                </div>
                <div id="locationSection" class="hidden selection-area">
                    <!-- Step 1: å¤§å·¥ä½œä½ç½® -->
                    <div id="step1">
                        <div style="margin: 10px 0; color: #aaa;">å¤§å·¥ä½œä½ç½®</div>
                        <button class="btn btn-large btn-primary" onclick="selectLocation('T9')">T9</button>
                        <button class="btn btn-large btn-primary" onclick="selectLocation('T9A')">T9A</button>
                        <button class="btn btn-large btn-primary" onclick="selectLocation('ç‡Ÿæ¥­éƒ¨22A26A')">ç‡Ÿæ¥­éƒ¨ 22A/26A</button>
                        <button class="btn btn-large btn-primary" onclick="selectLocation('SU')">SU</button>
                        <button class="btn btn-secondary" onclick="toggleLocationSection()">æ”¶èµ· â–²</button>
                    </div>
                    
                    <!-- Step 2: é¸æ“‡æ¨“å±¤ -->
                    <div id="step2" class="hidden">
                        <div style="margin: 10px 0; color: #aaa;">æ¨“å±¤ - <span id="selectedLocation"></span></div>
                        <div id="floorButtons" style="display: flex; flex-wrap: wrap; gap: 5px;"></div>
                        <button class="btn btn-secondary" style="margin-top: 10px;" onclick="goStep(1)">â† è¿”å›</button>
                    </div>
                    
                    <!-- Step 3: é¸æ“‡å–®ä½ -->
                    <div id="step3" class="hidden">
                        <div style="margin: 10px 0; color: #aaa;">å–®ä½ - <span id="selectedFloor"></span></div>
                        <div id="unitButtons" style="display: flex; flex-wrap: wrap; gap: 5px;"></div>
                        <button class="btn btn-secondary" style="margin-top: 10px;" onclick="goStep(2)">â† è¿”å›</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- è¨˜éŒ„åˆ—è¡¨ -->
        <div id="workList"></div>
        
        <!-- å ±å‘Šå€ -->
        <div id="reportArea" class="card hidden">
            <button class="back-btn" onclick="hideReport()">â† è¿”å›</button>
            <h3 style="color: #00d4ff; margin-bottom: 10px;">ğŸ“‹ å·¥äººå‡ºå‹¤å ±å‘Š</h3>
            <pre id="reportText" style="white-space: pre-wrap; font-size: 0.85em; background: rgba(0,0,0,0.3); padding: 10px; border-radius: 8px; overflow-x: auto;"></pre>
            <button class="btn btn-primary" onclick="copyReport()">ğŸ“‹ è¤‡è£½å ±å‘Š</button>
        </div>
    </div>

    <!-- é¸é …å½ˆçª— -->
    <div id="recordOptionsModal" class="modal">
        <div class="modal-content">
            <h3>é¸é …</h3>
            <button class="btn btn-primary" onclick="confirmEdit()">âœï¸ ä¿®æ”¹</button>
            <button class="btn btn-danger" onclick="confirmDelete()">ğŸ—‘ï¸ åˆªé™¤</button>
            <button class="btn btn-secondary" onclick="closeRecordOptions()">è¿”å›</button>
        </div>
    </div>

    <script>
        // æ•¸æ“šçµæ§‹
        let records = JSON.parse(localStorage.getItem('workerRecords') || '[]');
        let selectedDate = new Date().toISOString().split('T')[0];
        let currentSelection = { location: '', floor: '', unit: '' };
        let currentRecordId = null;
        
        // æ¨“å±¤é…ç½®
        const FLOORS = {
            'T9': ['ALL', '2', '3', '5', '6', '7', '8', '9', '10', '11', '12', '15', '16', '17', '18', '19', '20', '21', '22', '23', '25'],
            'T9A': ['ALL', '2', '3', '5', '6', '7', '8', '9', '10', '11', '12', '15', '16', '17', '18', '19', '20', '21', '22', '23', '25', '26'],
            'ç‡Ÿæ¥­éƒ¨22A26A': ['22A', '26A'],
            'SU': ['27', '28']
        };
        
        const UNITS = {
            'T9': { '2': ['A', 'B'], '3': ['A', 'B'], '5': ['A', 'B'], '6': ['A', 'B'], '7': ['A', 'B'], '8': ['A', 'B'], '9': ['A', 'B'], '10': ['A', 'B'], '11': ['A', 'B'], '12': ['A', 'B'], '15': ['A', 'B'], '16': ['A', 'B'], '17': ['A', 'B'], '18': ['A', 'B'], '19': ['A', 'B'], '20': ['A', 'B'], '21': ['A', 'B'], '22': ['A', 'B'], '23': ['A', 'B'], '25': ['A', 'B'], 'ALL': [] },
            'T9A': { '2': ['A', 'B', 'C'], '3': ['A', 'B', 'C'], '5': ['A', 'B', 'C'], '6': ['A', 'B', 'C'], '7': ['A', 'B', 'C'], '8': ['A', 'B', 'C'], '9': ['A', 'B'], '10': ['A', 'B'], '11': ['A', 'B'], '12': ['A', 'B'], '15': ['A', 'B'], '16': ['A', 'B'], '17': ['A', 'B'], '18': ['A', 'B'], '19': ['A', 'B'], '20': ['A', 'B'], '21': ['A', 'B'], '22': ['A', 'B'], '23': ['A', 'B'], '25': ['A', 'B'], '26': ['A', 'B'], 'ALL': [] },
            'ç‡Ÿæ¥­éƒ¨22A26A': { '22A': ['Both', '22A', '26A'], '26A': ['Both', '22A', '26A'] },
            'SU': { '27': [], '28': [] }
        };
        
        function saveRecords() {
            localStorage.setItem('workerRecords', JSON.stringify(records));
            renderRecords();
            updateStats();
        }
        
        function showAddForm() {
            document.getElementById('addForm').classList.remove('hidden');
            document.getElementById('reportArea').classList.add('hidden');
            toggleLocationSection();
            goStep(1);
        }
        
        function hideAddForm() {
            document.getElementById('addForm').classList.add('hidden');
            resetForm();
        }
        
        function toggleLocationSection() {
            const section = document.getElementById('locationSection');
            const icon = document.getElementById('locationToggleIcon');
            if (section.classList.contains('hidden')) {
                section.classList.remove('hidden');
                icon.textContent = 'â–²';
                goStep(1);
            } else {
                section.classList.add('hidden');
                icon.textContent = 'â–¼';
            }
        }
        
        function goStep(step) {
            document.getElementById('step1').classList.add('hidden');
            document.getElementById('step2').classList.add('hidden');
            document.getElementById('step3').classList.add('hidden');
            document.getElementById('step' + step).classList.remove('hidden');
        }
        
        function selectLocation(loc) {
            currentSelection.location = loc;
            document.getElementById('selectedLocation').textContent = loc;
            const floorDiv = document.getElementById('floorButtons');
            floorDiv.innerHTML = FLOORS[loc].map(f => 
                `<button class="pill-btn" onclick="selectFloor('${f}')">${f}</button>`
            ).join('');
            goStep(2);
            updateCurrentLocation();
        }
        
        function selectFloor(floor) {
            currentSelection.floor = floor;
            document.getElementById('selectedFloor').textContent = floor;
            const unitDiv = document.getElementById('unitButtons');
            const units = UNITS[currentSelection.location][floor];
            if (units && units.length > 0) {
                unitDiv.innerHTML = units.map(u => 
                    `<button class="pill-btn" onclick="selectUnit('${u}')">${u}</button>`
                ).join('');
                goStep(3);
            } else {
                currentSelection.unit = floor;
                updateCurrentLocation();
                toggleLocationSection();
            }
        }
        
        function selectUnit(unit) {
            currentSelection.unit = unit;
            updateCurrentLocation();
            toggleLocationSection();
        }
        
        function updateCurrentLocation() {
            const locStr = `${currentSelection.location} ${currentSelection.floor}${currentSelection.unit ? '-' + currentSelection.unit : ''}`;
            document.getElementById('currentLocation').textContent = locStr;
        }
        
        function addWork() {
            const content = document.getElementById('workContent').value.trim();
            const foreman = document.getElementById('foreman').value;
            let count = document.getElementById('workerCount').value;
            
            if (!content) { alert('è«‹è¼¸å…¥å·¥ä½œå…§å®¹'); return; }
            if (!foreman) { alert('è«‹é¸æ“‡åˆ¤é ­'); return; }
            if (!currentSelection.location) { alert('è«‹é¸æ“‡ä½ç½®'); return; }
            
            if (count === 'more') {
                count = document.getElementById('moreWorkers').value;
                if (!count || count < 1) { alert('è«‹è¼¸å…¥äººæ•¸'); return; }
            }
            
            const locationStr = `${currentSelection.location} ${currentSelection.floor}${currentSelection.unit ? '-' + currentSelection.unit : ''}`;
            
            records.push({
                id: Date.now(),
                location: locationStr,
                content: content,
                foreman: foreman,
                count: parseInt(count),
                time: new Date().toLocaleTimeString('zh-HK', { hour: '2-digit', minute: '2-digit' })
            });
            
            saveRecords();
            hideAddForm();
        }
        
        function showRecordOptions(id) {
            currentRecordId = id;
            document.getElementById('recordOptionsModal').style.display = 'flex';
        }
        
        function closeRecordOptions() {
            document.getElementById('recordOptionsModal').style.display = 'none';
            currentRecordId = null;
        }
        
        function confirmDelete() {
            if (currentRecordId) {
                if (confirm('ç¢ºå®šåˆªé™¤å‘¢é …ç´€éŒ„ï¼Ÿ')) {
                    records = records.filter(r => r.id !== currentRecordId);
                    saveRecords();
                }
            }
            closeRecordOptions();
        }
        
        function confirmEdit() {
            alert('ä¿®æ”¹åŠŸèƒ½é–‹ç™¼ä¸­...');
            closeRecordOptions();
        }
        
        function clearAll() {
            if (confirm('ç¢ºå®šæ¸…ç©ºæ‰€æœ‰ç´€éŒ„ï¼Ÿ')) {
                records = [];
                saveRecords();
            }
        }
        
        
        function getDatesWithRecords() {
            const dates = new Set(records.map(r => r.date));
            return Array.from(dates).sort().reverse();
        }
        
        function renderDateSelector() {
            const dates = getDatesWithRecords();
            const selector = document.getElementById('dateSelector');
            
            let html = `
                <span style="color: #aaa; margin-right: 8px;">ğŸ“… æ—¥æœŸ:</span>
                <input type="date" id="recordDate" value="${selectedDate}" onchange="changeDate(this.value)" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 5px; border-radius: 4px;">
            `;
            
            if (dates.length > 0) {
                html += '<span style="color: #aaa; margin: 0 10px;">|</span>';
                dates.forEach(d => {
                    const isSelected = d === selectedDate;
                    const dateObj = new Date(d);
                    const dateStr = dateObj.toLocaleDateString('zh-HK', {month:'numeric', day:'numeric'});
                    html += `<button class="pill-btn ${isSelected ? 'selected' : ''}" onclick="changeDate('${d}')" style="background: ${isSelected ? '#00d4ff' : 'rgba(255,255,255,0.1)'}; color: ${isSelected ? '#000' : '#fff'}; border: none; padding: 5px 10px; border-radius: 15px; cursor: pointer;">${dateStr}</button>`;
                });
            }
            
            selector.innerHTML = html;
        }
        
        function changeDate(newDate) {
            selectedDate = newDate;
            saveRecords();
            renderRecords();
            renderDateSelector();
            updateStats();
        }
        
function renderRecords() {
            const list = document.getElementById('workList');
            const todayRecords = records.filter(r => r.date === selectedDate);
            
            if (todayRecords.length === 0) {
                list.innerHTML = '<div style="text-align: center; color: #666; padding: 30px;">æš«æ™‚æœªæœ‰è¨˜éŒ„ (é¸æ“‡å…¶ä»–æ—¥æœŸæŸ¥çœ‹)</div>';
                return;
            }
            
            // Group by foreman
            const byForeman = {};
            todayRecords.forEach(r => {
                if (!byForeman[r.foreman]) {
                    byForeman[r.foreman] = [];
                }
                byForeman[r.foreman].push(r);
            });
            
            // Sort foreman by count (most first)
            const sortedForemen = Object.keys(byForeman).sort((a, b) => byForeman[b].length - byForeman[a].length);
            
            list.innerHTML = sortedForemen.map(foreman => {
                const items = byForeman[foreman];
                const totalWorkers = items.reduce((sum, r) => sum + r.count, 0);
                const uniqueLocations = [...new Set(items.map(r => r.location))].length;
                
                return `
                <div class="work-item" style="border-left: 4px solid #00d4ff;">
                    <div class="header">
                        <span class="åˆ¤é ­">ğŸ‘· ${foreman}</span>
                        <span style="color: #ffa502; font-size: 0.9em;">
                            ${items.length}é …å·¥ç¨‹ | ${totalWorkers}äºº
                        </span>
                    </div>
                    <div style="font-size: 0.85em; color: #aaa; margin-bottom: 8px;">
                        ${uniqueLocations} å€‹ä½ç½®
                    </div>
                    <div class="å…§å®¹" style="font-size: 0.9em; margin-top: 8px;">
                        ${items.map(r => `
                            <div style="padding: 4px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                ${r.location} - ${r.content} 
                                <span style="color: #00d4ff;">(${r.count}äºº)</span>
                            </div>
                        `).join('')}
                    </div>
                    <div class="work-item-actions">
                        <button class="btn btn-secondary" onclick="showRecordOptions(${items[0].id})">è©³æƒ…</button>
                    </div>
                </div>
                `;
            }).join('');
        }
        
        function updateStats() {
            const todayRecords = records.filter(r => r.date === selectedDate);
            const total = todayRecords.reduce((sum, r) => sum + r.count, 0);
            document.getElementById('totalWorkers').textContent = total;
            document.getElementById('totalItems').textContent = todayRecords.length;
        }
        
        function generateReport() {
            const today = new Date().toLocaleDateString('zh-HK', { month: 'numeric', day: 'numeric', weekday: 'short' });
            const weather = 'æ™´';
            
            const byForeman = {};
            records.forEach(r => {
                if (!byForeman[r.foreman]) byForeman[r.foreman] = [];
                byForeman[r.foreman].push(r);
            });
            
            let report = `${today} ä¸Š(${weather})ä¸‹(${weather})\n`;
            report += `å·¥äºº${records.reduce((s, r) => s + r.count, 0)}äºº\n\n`;
            
            const foremanOrder = ['æŒ¯æº', 'ç›ˆåº·', 'èšé¾', 'å‰µåŸº', 'å‹è‰¯è¨˜', 'æ—­æš‰', 'PHM', 'ç”Ÿæ´»è‰²å½©', 'é æ±', 'æ’å®‰', 'ç¾ç‰¹', 'æ–°é«˜', 'å˜‰è‡¨', 'æ·é”', 'ä¿¡ç›Š', 'è¯æ˜‡', 'æ£®è¯', 'è¥¿é–€å­', 'é‡‘ç£Š', 'æ•¸ç¢¼é€š'];
            
            foremanOrder.forEach(f => {
                if (byForeman[f]) {
                    report += `${f}\n`;
                    byForeman[f].forEach(r => {
                        report += `${r.location}  ${r.content}${r.count > 1 ? r.count + 'äºº' : ''}\n`;
                    });
                    report += '\n';
                }
            });
            
            document.getElementById('reportText').textContent = report;
            document.getElementById('reportArea').classList.remove('hidden');
            document.getElementById('addForm').classList.add('hidden');
        }
        
        function hideReport() {
            document.getElementById('reportArea').classList.add('hidden');
        }
        
        function copyReport() {
            const text = document.getElementById('reportText').textContent;
            navigator.clipboard.writeText(text).then(() => {
                alert('å ±å‘Šå·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼');
            });
        }
        
        function resetForm() {
            currentSelection = { location: '', floor: '', unit: '' };
            document.getElementById('workContent').value = '';
            document.getElementById('foreman').value = '';
            document.getElementById('workerCount').value = '1';
            document.getElementById('moreWorkers').value = '';
            document.getElementById('currentLocation').textContent = '';
        }
        
        document.getElementById('workerCount').addEventListener('change', function() {
            const moreInput = document.getElementById('moreWorkers');
            if (this.value === 'more') {
                moreInput.classList.remove('hidden');
            } else {
                moreInput.classList.add('hidden');
            }
        });
        
        // åˆå§‹åŒ–
        renderRecords();
        updateStats();
    </script>
</body>
</html>
